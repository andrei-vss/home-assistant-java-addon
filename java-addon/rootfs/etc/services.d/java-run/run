#!/usr/bin/with-contenv bashio
# ==============================================================================
# Start the clever-home service
# s6-overlay docs: https://github.com/just-containers/s6-overlay
# ==============================================================================


CONFIG_DIR="/config"
APPS_DIR="$CONFIG_DIR/apps"
mkdir -p "$APPS_DIR"

# Copiază JAR-ul default doar dacă nu există deja
if [ ! -f "$APPS_DIR/app.jar" ]; then
    cp /opt/app/app.jar "$APPS_DIR/app.jar"
fi


# Export Supervisor token for Java app (if needed)
export SUPERVISOR_TOKEN="$SUPERVISOR_TOKEN"

## Run Java program
exec java -jar "$APPS_DIR/app.jar"